## pdb를 사용해 대화형으로 디버깅하라

- 디버깅을 할 때 print 함수를 사용하면 다양한 문제의 근원을 추적할 수 있다
    - 한편 문제가 될 법한 구체적인 경우에 대한 테스트를 작성하는 것도 문제를 격리시키는 좋은 방법이다
    - 하지만 더 강력한 도두가 필요하다면 파이썬 내장 대화형 디버거를 사용 할 수 있따

### 대화형 디버거

- 대부분의 다른 프로그래밍 언어에서 디버거를 사용할 때는 소스 파일에서 프로그램 실행을 일시 중단하고 싶은 줄을 지정하고 실행한다
- 하지만 파이썬에서 디버거를 사용하는 가장 편한 방법은 문제를 조사하기에 가장 적합한 지점에서 프로그램이 디버거를 초기화할 수 있게 프로그램을 변경하는 것이다
    - 이는 파이썬 그로그램을 일반적인 상태로 시작하는 경우와 디버거로 시작하는 경우에 차이가 없다는 뜻이다

```python
def compute_rmse(observed, ideal):
    total_err_2 = 0
    count = 0
    for got, wanted in zip(observed, ideal):
        err_2 = (got - wanted) ** 2
        breakpoint()  # 디버거 시작 지점
        total_err_2 += err_2
        count += 1
```

- 디버거를 초기화하기 위해 해야 할 일은 breakpoint 내장 함수를 호출하는 것 뿐이다
    - 이 함수는 pdb 내장 모듈을 임포트하고 set_trace함수를 실행하는 것과 똑같은 일을 한다
- breakpoint 함수가 실행되자마자, breakpoint 바로 다음 줄로 실행이 옮겨가기전에 프로그램 실행이 일시 중단된다
    - 프로그램을 시작한 터미널에서는 대화형 파이썬 쉘이 시작된다
    - 변수 이름을 입력하면 변수에 저장된 값을 출력할 수 있다
    - locals 내장 함수를 호출하면 모든 지역 변수 목록을 볼 수 있다
    - wehre : 핸자 실행 중인 프로그램의 호출 스택을 출력한다. 이 명령을 사용하면 실행중인 프로그램의 현재 위치를 알 수 있고, breakpoint 트리거가 어떻게 발동 됐는지 볼 수 있다
    - up : 실행 호출 스택에서 현재 관찰 중인 함수를 호출한 쪽(위)으로 호출 스택 영역을 한 단계 이동해서 해당 함수의 지역 변수를 관찰 할 수 있게 한다
    - down : 실행 호출 스택에서 한 수준 아래로 호출 스택 영역을 이동한다
    - step : 프로그램을 다음 줄 까지 실행한 다음 제어를 디버거로 돌려서 디버거 프로프트를 표시한다
    - next : 프로그램을 다음 줄까지 실행한 다음 제어를 디버거로 돌려서 디버거 프로프트를 표시한다. 소스 코드의 다음 줄에 함수를 호출하는 부분이 있따면, 해당 함수에서 반환된 다음에 제어가 디버거로
      돌아온다
    - return : 현자 함수에서 반환될 떄까지 프로그램을 실행한 후 제어가 디버거로 돌아온다
    - continue : 다음 중단점에 도달할 때까지 프로그램을 계속 실행한다
    - quit : 디버거에서 나가면서 프로그램도 중단시킨다

```python
def compute_rms(observed, ideal):
    ...


resuelt = compute_rms(
    [1.8, 1.7, 3.2, 7j],  # 잘못된 입력
    [2, 1.5, 3, 5]
)

```

- 디버거를 시작하는 또 다른 유용한 방법으로 사후 디버깅이 있다
    - 사후 디버깅을 활용하면 예외가 발생하거나 프로그램에 문제개 생겨 중단된 뒤에 프로그램을 디버깅할 수 있다
    - 특히 breakpoint 함수 호출을 어디에 추가해야 할지 잘 모르는 경우에 도움이 된다
- 명렬줄에서 python -m pbd -c continue프로그램 경로를 사용하면 pdb 모듈이 프로그램 실행을 제어할 수 있게 된다
    - continue 명령은 pdb에게 프로그램을 즉시 시작하라고 명령한다 