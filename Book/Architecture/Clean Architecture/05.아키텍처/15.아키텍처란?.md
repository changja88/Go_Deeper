## 아키텍처란?

- 아키텍트라면 코드에서 탈피하여 고수준의 문제에 집중해야 한다는 거짓말에 절대로 속아 넘어가서는 안 된다
- `소프트웨어 아키텍트는 최고의 프로그래머이며, 계속 프로그래밍 작업을 맡을 뿐만 아니라 동시에 나머지 팀원들이 생산성을 극대화 할 수 있는 설계를 하도록 방향을 이끌어 준다`
- 프로그래밍 작업을 계속하는 이유는, 발생하는 문제를 경험해보지 않는다면 다른 프로그래머를 지원하는 작업을 제대로 수행할 수 없기 때문이다
- 아키텍처란 시스템을 구축했던 사람들이 만들어낸 시스템의 형태이다
    - `그 모양은 시스템을 컴포넌트로 분할하는 방법, 분할된 컴포넌트를 배치하는 방법, 컴포넌트가 서로 의사소통하는 방식에 따라 정해진다`
    - 그리고 그 형태는 시스템이 쉽게 개발, 배포, 운영, 유지보수되도록 만들어 져야한다
- `시스템의 동작 여부는 아키텍처와는 거의 관련이 없다`
    - 아키텍처가 시스템이 제대로 동작하도록 지원하기는 하지만 능동적이고 본질적인 것은 아니다
- `아키텍처의 궁극적인 목표는 시스템의 수명과 관련된 비용은 최소화하고, 프로그래머의 생산성은 최대화하는데 있다`

### 개발

- 개발하기 힘든 시스템이라면 수명이 길지도 않고 건강하지도 않을 것이다
- 팀 구조가 다르다면 아키텍처 관련 결정에서도 차이가 난다
    - 예를들어 팀이 5명정도일 경우 잘 정의된 컴포넌트나 인터페이스가 없더라도 서로 효율적으로 협력하여 모노리틱 시스템을 개발 할 수 있다
    - 사실 이런 팀이라면 개발 초기에는 아키텍처 관련 제약들이 오히려 방해가 된다고 여길 가능성이 높다
    - 수많은 시스템에서 좋은 아키텍처가 결여된 이유는 바로 이 때문이다
- 7명씩 5팀이 있다고 할 경우, 잘 설계된 컴포넌트 단위로 분리하지 않으면 개발이 진척되지 않는다
    - 다른 요소를 고려하지 않는다면 이 시스템의 아키텍처는 다섯 개의 컴포넌트로 발전된 가능성이 높다
    - 이러한 팀별 단일 컴포넌트 아키텍처가 시스템을 배포, 운영, 유지보수하는데 최적일 가능성은 거의 없다

### 배포

- 배포비용이 높을수록 시스템의 유용성은 떨어진다
- 따라소 소프트웨어 아키텍처는 시스템을 단 한번에 쉽게 배포할 수 있도록 만드는 데 그 목표를 두어야 한다

### 운영

- 아키텍처가 시스템 운영에 미치는 영향은 개발, 배포, 유지보수에 미치는 영향보다는 덜 극적이다
- 운영에서 겪는 대다수의 어려움은 소프트웨어 아키텍처에는 극적인 영향을 주지않고도 단순히 하드웨어를 더 투입해서 해결할 수 있다
    - 단순히 스토리지와 서버를 추가하는 것만으로도 제대로 동작하도록 만들 수 있을 때가 많다
    - 이 방법이 잘 못된 것은 아니다
- `시스템을 운영할 때 아키텍처가 맡은 중요한 역할은 시스템을 운영하는데 필요한 도구도 알려줘야 한다`
    - 유스케이스, 기능, 시스템의 필수 행위를 일급 엔티티로 격상시키고, 이들 요소가 개발자에 주요 목표로 인식되도록 해야 한다

### 유지보수

- 유지보수는 모든 측면에서 봤을 때 소프트웨어 시스템에서 비용이 가장 많이 든다
- `유지보수의 가장 큰 비용은 탐사(spelunking)와 이를 인한 위험부담에 있다`
    - 탐사란 기존 소프트웨어에 새로운 기능을 추가하거나 결함을 수정할 때, 소프트웨어를 파헤쳐서 어디를 고치는 게 최선인지, 그리고 어떤 전략을 쓰는게 최적일지를 결정할 때 드는 비용이다
- 시스템을 컴포넌트로 분리하고, 안정된 인터페이스를 두어 서로 격리한다
    - 이를 통해 미래에 추가될 기능에 대한 길을 밝혀 둘 수 있을 뿐만 아니라 의도치 않은 장애가 발생할 위험을 크게 줄일 수 있다

### 선택사항 열어 두기

- 스프트웨어는 두 종류의 가치, 즉 행위적 가치와 구조적 가치를 지닌다
    - 소프트웨어를 부드럽게 만드는 것은 구조적 가치에서 오기때문에 더 중요하다
- `소프트웨어를 부드럽게 유지하는 방법은 선택사항을 가능한 많이, 그리고 오랫동안 열어 두는 것이다`
    - `열어두어야 할 선택 사항이란 중요치 않은 세부사항(detail)이다`
- 모든 소프트웨어 시스템은 두 가지 구성요소로 분해할 수 있다
    - 정책과(policy)와 세부사항(detail)이다
    - 정책 요소는 모든 업무 규칙과 업무 절차를 구체화한다. 정책이란
    - 세부사항은 사람, 외부 시스템, 프로그래머가 정책과 소통할 때 필요한 요소지만, 정책이 가진 행위에는 조금도 영향을 미치지 않는다
        - 이런 세부사항에는 입출력 장치, 데이터베이스, 웹 시스템, 서버, 프레임웤, 통신 프로토콜 등이 있다
- `아키텍트의 목표는 시스템에서 정책을 가장 핵심적인 요소로 식별하고 동시에 세부사항은 정책에 무관하게 만들 수 있는 형태의 시스템을 구축하는데 있다`
    - 개발 초기에는 데이터베이스 시스템을 선택할 필요가 없다. 고수준의 정책은 어떤 종류의 데이터베이스를 사용하는지 신경 써서는 안된다
    - 개발 초기에는 웹서버를 선택할 필요가 없다. 고수준의 정책은 자신이 웹을 통해 전달되는 사실을 알아서는 안 된다
    - 개발 초기에는 REST를 적용할 필요가 없다. 고수준의 정책은 외부 세계로의 인터페이스에 대해 독립적이야 하기 때문이다.
    - 개발 초기에는 의존성 주입 프레임워크를 적용할 필요가 없다. 고수준의 정책은 의존성을 해석하는 방식에 대해 신경써서는 안된다
- `좋은 아키텍트는 결정되지 않는 사항의 수를 최대화한다`

### 결론

- 좋은 아키텍트는 세부사항을 정책으로부터 신중하게 가려내고, 정책이 세부사항과 결합되지 않도록 엄격하게 분리하다
    - 이를 통해 정책은 세부사항에 관한 어떠한 지식도 갖지 못하게 되며, 어떤 경우에도 세부사항에 의존하지 않게 된다
- `좋은 아키텍트는 세부사항에 대한 결정을 가능한 오랫동안 미룰 수 있는 방향으로 정책을 설계한다`