## 일관성 없는 모델

- 예제
    - 온라인 광고 &rarr; 리드 &rarr; 전화 &rarr; 판매
    - 리드는 마케팅과 영업 부서에서 서로 다른 의미로 사용된다
    - 이런경우 어떻게 유비쿼터스 언어를 어떻게 공식화해야 할까?
        - 전통적인 솔루션은 모든 종류의 문제에 사용할 수 있는 단일 모델을 설계하는 것이다
            - 모든 종류의 문제에 사용할 수 있는 모델은 사실 복잡하기 쉬워서 어떠한 곳에서도 사용할 수 없다
        - '마케팅 리드', '영업 리드'와 같이 문맥상 정의에 있는 용어 엎에 접두사를 추가한다
            - 유비쿼터스 언어와 일치하지 않는다 &rarr; 아무도 대화에서 접두사를 사용하지 않을 것이다

## 바운디드 컨텍스트란 무엇인가?

- 위 문제를 도메인 주도 설계에서의 솔루션은 간단한다
    - 유비쿼터스 언어를 여러 개의 작은 언어로 나눈 다음 각 언어를 적용할 수 있는 명시적인 바운디드 컨텍스트에 할당하면 된다
    - 즉, 마케팅 컨텍스트에서의 '리드', 영업 컨텍스트에서의 '리드'로 분할하여 사용한다

### 모델 경계

- 모델은 실제 세계의 복사본이 아니라 복잡한 시스템을 이해하는데 도움을 주기 위해 구조화한 것이다
    - 모델은 경계없이 존재할 수 없다 &rarr; 경계가 없다면 현실 세계의 복제본처럼 확장될 것이다
    - 따라서 모델의 경계(바운디드 컨텍스트)를 정의하는 것은 모델링 프로세스의 본질적인 부분이다

### 정제된 유비쿼터스 언어

- 유비쿼터스 언어는 바운디드 컨텍스트 경계 안에서만 보편적으로 적용된다
- 모델은 해결해야하는 문제 없이는 존재할 수 없기 떄문에 유비쿼터스 언어는 명시적으로 적용 가능한 컨텍스트 없이 정의하거나 사용할 수 없다

### 바운디드 컨텍스트의 범위

- 비즈니스 도메인을 모델링하기 위해 모델을 분석하고, 세분화된 모델에 적용가능한 컨텍스트(바운디드 컨텍스트)를 엄격하게 정의해야한다
- 큰 유비쿼터스 언어를 더 작고 관리하기 쉬운 문제 도메인으로 나누는 것이 도움이 될 수 있지만, 바운디드 컨텍스트를 작게 만들기 위해 노력하는 것은 역효과를 낼 수 있다
    - 더 작게 만들수록 설계를 통합하는 오버헤드가 커진다
- 따라서 바운디드 컨텍스트의 크기에 대한 결정은 문제 도메인이 무엇이냐에 따라 달라진다
    - 때로는 넓은 경계를 사용하는 것이 더 명확하고
    - 어떤 경우에는 분해하는 것이 더 합리적이다
- `일반적으로 독립적으로 바운디드 컨텍스트의 나머지 기능과 독립적으로 확장할 수 있는 경우 추출해서 분해할 수 있다`
- 응집된 기능을 여러 바운디드 컨텍스트로 분할 (X)
    - 각 컨텍스트가 독립적으로 발전하는 능력을 저해한다
    - 비즈니스 요구사항과 변경사항은 바운디드 컨텍스트에 동시에 영향을 끼치고, 변경에 대한 동시 배포가 요구된다
    - `같은 데이터에서 작동하는 응집된 유스케이스의 집합을 식별하되, 그것을 여러개의 바운디드 컨텍스트로 분해하지 마라`

## 바운디드 컨텍스트 대 하위 도메인

- 바운디드 컨텍스트를 만드는 것과 하위 도메인을 구성하는 것은 비즈니스 도메인을 분해하는 두 가지 방법으로 보일 수 있으나 그렇지 않다

### 하위 도메인

- 하위 도메인은 상호 관련된 유스케이스 집합과 유사하다
- 유스케이스는 비즈니스 도메인과 시스템 요구사항에 따라 정의된다
- 엔지니어는 요구사항을 정의하지 않는다. 비즈니스가 담당한다

### 바운디드 컨텍스트

- 소프트웨어 엔지니어에 의해 설계된다
- 모델의 경계를 선택하는 것은 전략적 설계의 의사결정이다
- 비즈니스 도메인을 더 작고 관리 가능한 문제 도메인으로 어떻게 나눌지 정한다
- 비운디드 컨텍스트와 하위 도메인 간에 일대일 관계를 맺는 것이 좋은 경우도, 다른 분해 전략이 더 좋을 수도 있다
- `하위 도메인은 발견하고 바운디드 컨텍스트는 설계한다는 점`이 가장 중요하다

## 경계

- 설계는 본질적으로 경계에 대한 것이다
- 바운디드 컨텍스트 패턴은 물리적 경계와 소유권 경계를 규정하기 위한 도메인 주도 설계 도구다

### 물리적 경계

- `바운디드 컨텍스트는 모델 경계뿐만 아니라 이를 구현하는 시스템의 물리적 경계 역할도 한다`
- 바운디드 컨텍스트는 개별 서비스/프로젝트로 구현돼야 한다
    - 구현, 진화, 버전 관리를 각각의 바운디드 컨텍스트와 독립적으로 해야한다
- 물리적 경계를 통해 각 바운디드 컨텍스트를 요구사항에 가장 적합한 기술 스택으로 구현할 수 있다
- 바운디드 컨텍스트는 여러 하위 도메인을 포함할 수 있다
    - 바운디드 컨텍스트는 물리적 경계고 하위 도메인은 논리적 경계다
    - 논리적 경계는 프로그래밍 언어의 종류에 따라 네임스페이스나 모듈, 패키지 같은 다른 이름을 갖는다

### 소유권 경계

- 바운디드 컨텍스트는 한 팀에서만 구현, 발전, 유지 관리해야 한다
    - 이러한 분리는 팀이 서로의 모델에 대해 만들 수 있는 암묵적인 가정을 제거한다
    - 대신 팀은 서로 다운 바운디드 컨텍스틀로 분리된 모델과 시스템을 명시적으로 연동하기 위한 통신 프로토콜을 정의해야 한다

## 실생활의 바운디드 컨텍스트

- 비지니스 도메인과 하위 도메인만큼 분명하지 않지만, 도메인 전문가의 멘탈 모델에 있는 것처럼 존재한다
- 소프트웨어에서 비즈니스 도메인을 모델링할 때 바운디드 컨텍스트가 있을 뿐만 아니라 다른 컨텍스트에서 다른 모델을 사용한다는 개념이 있음을 보여주는 예제

### 시맨틱 도메인

- 도메인 주도 설계의 바운디드 컨텍스트는 시맨틱 도메인의 사전적 개념에 기반한다고 볼 수 있다
    - 시맨틱 도메인(semantic domain)은 의미 영역과 해당 의미를 전달하기 위해 사용하는 단어 영역으로 구분한다
        - 모니터, 포트, 프로세서라는 단어는 소프트웨어와 하드웨어 엔지니어링 시맨틱 도메인에서 서로 다른 의미를 갖는다
        - 토마토 토마토 &rarr; 토마토는 어떤 정의에서는 과일, 또 다른 정의에서는 채소이다


