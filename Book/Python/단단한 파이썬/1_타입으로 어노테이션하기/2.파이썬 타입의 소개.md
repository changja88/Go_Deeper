## 파이썬 타입의 소개

### 타입이란?

- 타입은 커뮤니케이션의 수단이다
- 타입은 정보를 전달한다
- 타입은 컴퓨터와 사용자가 추론할 수 있는 표현을 제공한다
    - 기계적인 표현 : 타입은 작동 방식과 제약 사항을 파이썬 언어 자체에 전달한다
    - 의미적 표현 : 타입은 작동 방식과 제약 사항을 다른 개발자에게 전달한다

### 의미적 표현

- 사용자가 선택한 타입은 시간과 공간을 가로질러 미래의 개발자에게 정보를 전달한다
- 타입은 사용자에게 해당 엔티티와 상호작용을 할 때 예상되는 동작을 알려준다
  - 타입은 사용자가 타입을 사용할 떄마다 상호작용하는 경계, 제약, 자유를 의미하며, 타입을 정확히 사용하는 이해의 장벽을 낮춰준다
    - 반대로 타입을 잘 쓰지 않으면 이해의 장벽이 높아진다

#### 예시

- datetime은 int보다 더 구체적이다
    - 단순한 숫자보다 좀 더 자세한 유스케이스를 전달한다
    - 좀더 구체적인 타입을 사용하는 것은 알아야 하는 가능한 연산 및 해당 타입에서의 제약 사항을 미래의 기여자들에게 알리는 것이다

```python
def close_kitchen_if_past_cutoff_time(point_in_time):
  if point_in_time >= closeing_time():
    close_kitchen()
    log_time_closed(point_in_time)
```

- 위 코드에서 point_in_time을 변경해야 한다는 사실을 알 수 있다
    - 그런데 어디에서 부터 시작해야 할까? 어떤 타입으로 이를 다뤄야 할까?를 알기 어렵다
    - 근본 원인은 파라미터의 의미적 표현을 불분명하게 한 것에 있다

### 타입 시스템

- 프로그래밍 언어는 코드 생성과 런타임 동안 특정 타입 시스템의 작동 방식에 대한 기대치를 설정한다

#### 강한 스펙트럼과 약한 스펙트럼

```
# 강한 스펙트럼 (파이썬)
[] + {} -> TypeError

# 약한 스펙트럼 
[] + {} -> [object Object] or 0
```

- 타입 시스템은 강약의 스펙트럼을 갖고 있다
    - 강한 쪽 스펙트럼의 언어들은 연산 타입을 지원하는 것만 가능하도록 제약을 두려한다 -> 타입의 의미적 표현을 꺤다면 컴파일, 런타입 오류가 발생한다 (하스켈, 타입 스크립트, 러스트)
    - 약한 쪽 스템트럼의 언어들은 타입이 지원하는 연산을 강하게 제약하지 않는다 -> 연산을 이해하고자 타입을 다른 타입으로 강제하는 경우가 많다 (자바스크립트, 펄)
    - 파이썬은 타입 제약이 강한 언어다
        - 타입 간의 묵시적 형 변한은 거의 없다
- 타입 제약이 약한 언어들은 태생적으로 견고성이 떨어지는가?
    - 타입 제약이 약한 언어일수록 견고성에 많은 신경을 써야 한다
    - 변수의 타입을 잘못 알고 잘못된 가정을 하기 쉽기 떄문이다
    - 린트, 테스트, 기타 도구에 의존해 유지 보수성을 향상시킨다

### 동적 타입과 정적 타입

- 동적 타압과 정적 타입, 이는 타입의 기계적 표현과는 근본적으로 다르다
- 정적 타입을 제공하는 언어는 빌드할 때 타입 정보를 변수에 삽입한다
    - 개발자는 명시적으로 변수에 타입 정보를 추가하거나 컴파일러 같은 도구가 개발자를 위해 타입을 추정한다
    - 변수들은 런타임 시에 타입을 바꾸지 않는다
    - 빠르게 안전한 코드를 작성하는 능력과 강력한 안정망이 이점이다
- 동적 타입은 값이나 변수 자체에 타입 정보를 삽입한다
    - 런타임 시에 변수들은 타입을 쉽게 바꿀수 있는데, 변수에 묶여 있는 타입의 정보가 없기 때문이다
    - 동적 타입은 개발 속도와 유연성을 지지한다

### 덕 타이핑

```python
def print_items(items: Iterable):
  for item in items:
    print(item)


print_items([1, 2, 3])
print_items({4, 5, 6})
print_items({"A": 1, "B": 2})
```

- `덕 타이핑이란 프로그래밍 언어에서 객체와 엔티티들이 어떤 인터페이스를 갖고 있다면 그 인터페이스의 타입처럼 쓸 수 있다는 것을 의미한다`
  - 이는 파이썬이 제공하는 놀라운 기능 중 하나며 사람들은 이를 의식하지 않은 채로 사용한다
- 위 코드의 동작 방식을 살펴보자
  - preint_items는 어떤 타입을 받을지에 대한 정보를 갖고 있지 않으며 런타임이 돼서야 이를 알 수 있다
    - 즉, 각각의 파라미터들을 조사해 타입에 따라 동작을 구분하는 방식이 아니다
    - 무엇이 전달되든지 반복되는만 보는 것이다 (__iter__가 있는지만 확인 한다) -> 덕 타이핑
- 덕 타이핑은 양날의 검과 같다
    - 덕 타이핑은 결합성을 높여주며 다중 타입을 처리할 수 있는 견고한 추상화 라이브러리의 구축은 복잡한 특수 사례의 필요성을 감소시킨다
    - 하지만 덕 타이핑을 과도하게 사용하면 개발자가 신뢰할 수 있는 가정은 허물어 지기 시작한다
      - 특히 코드를 업데이트하는 경우에는 단순 변경의 경우처럼 간단하지 않다. 모든 호출 코드를 살펴보고 함수에 전달된 타입들이 새로운 업데이트를 충족하는지 확인해야 한다 







