## 딕셔너리, 맵, 해시 테이블

- 파이썬에서 딕셔너리는 중심이 되는 데이터 구조다
- 딕셔너리는 맵, 해시맵, 조회 테이블, 연관 배열 이라고도 한다
    - 이 데이터 구조들은 주어진 키와 연관된 객체의 검색, 삽입, 삭제를 효율적으로 수행한다

### dict: 믿음직한 딕셔너리

- 파이썬은 언어 차원에서 강력한 딕셔너리 구현을 제공한다 (dict)
- 객체를 키로 사용하려면 몇 가지 제약 사항을 충족해야 한다
    - 파이썬 딕셔너리는 임의의 해시 가능 타입인 키를 사용해 색인한다
    - 해시 가능 객체는 수명 동안 해시값이 변경되지 않으며 (__hash__) 다른 객체와 비교할 수 있다(__eq__) 또한 동등한 해시 가능 객체들은 모두 해시 값이 같아야 한다
    - 문자열 및 숫자와 같은 변경 불가능한 타입은 해시 가능하며 딕셔너리 키로 사용할 수 있다
    - 해시 가능 타입만 포함하는 한, tuple 객체도 딕셔너리 키로 사용할 수 있다
- 파이썬 딕셔너리는 잘 테스트되고 정교하게 조정된 해시 테이블 구현일 기반으로 한다
    - 일반적인 경우 조회, 사입, 삭제 작업 시간 복잡성은 O(1) 이다 -> 상수 복잡도

### collections.OrderedDict: 키 삽입 순서 기억

- 파이썬에는 키의 삽입 순서를 기억하는 특수한 dict 서브클래스인 collections.OrderedDict가 있따
    - 표준 dict도 파이썬 3.6 이상부터는 키의 삽입 순서를 유지한다
    - 하지만 언어 사양에 정의되어 있지는 않다 -> 따라서 알고리즘이 작동하는 데 키 순서가 중요하면 OrderedDict 클래스를 명시적으로 사용하는 것이 좋다

### collections.defaultdict: 누락된 키의 기본값 반환

```python
dd = defaultdict(list)
dd['dogs'].append('Rufus')  # dd 에 list를 넣어 준적이 없지만 가능하다
```

- defaultdict 클래스는 생성자에서 호출 가능한 함수를 입력받고, 요청된 키를 찾을 수 없는 경우에 이 함수의 반환값을 반환한다
    - 이렇게 하면 get() 메서드를 사용하거나 일반 딕셔너리에서 KeyError예외를 잡아내느 것과 비교하여 가독성을 개선할 수 있다

### collections.ChainMap: 여러 딕셔너리를 단일 매핑으로 검색

```python
dict1 = {'one': 1, 'two': 2}
dict2 = {'three': 3, 'four': 4}
chain = ChainMap(dict1, dict2)  # {'one': 1, 'two': 2, 'three': 3, 'four': 4}
```

- ChainMap 데이터 구조는 여러 개의 딕셔너리를 하나의 매핑으로 그룹화 한다
    - 조회할 때는 키가 발견될 떄까지 내부의 딕셔너리들을 하나씩 검사한다 (왼쪽에서 오른쪽으로)
    - 삽입, 갱신, 삭제는 체인에 추가된 첫 번째 딕셔너리에만 영향을 미친다

### types.MappingProxyType: 읽기 전용 딕셔너리를 만들기 위한 래퍼

```python
writable = {'one': 1, 'two': 2}
read_only = MappingProxyType(writable)
```

- MappingProxyType은 표준 딕셔너리를 감싼 래퍼로, 감싸진 딕셔너리의 데이터에 대한 읽기 전용 인터페이스를 제공한다
    - 파이썬 3.3에 추가됐으며 변경 불가능한 프록시 버전의 딕셔너리를 만드는데 사용할수 있다
    - 즉 모듈의 내부 상태를 가져올 수는 있으나 쓰기는 제한하고자 할 때 유용한다 