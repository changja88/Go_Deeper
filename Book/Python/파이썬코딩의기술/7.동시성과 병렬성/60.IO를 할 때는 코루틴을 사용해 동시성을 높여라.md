## IO를 할 때는 코루틴을 사용해 동시성을 높여라

- 파이썬은 높은 I/O 동시성을 처리하기 위해 코루틴을 사용한다
    - 코루틴을 사용하면 파이썬 프로그램안에서 동시에 실행되는 것처럼 보이는 함수를 아주 많이 쓸 수 있다
    - 코루틴은 aync와 await 키워드를 사용해 구현되며, 제너레이터를 실행하기 위한 인프라를 사용한다

### 코루틴

- 코루틴을 시작하는 비용은 함수 호출뿐이다
- 활성화된 코루틴은 종료될 때까지 1KB미만의 메모리를 사용한다
- 스레드와 마찬가지로 코루틴도 환경으로부터 입력을 소비하고 결과를 출력할 수 있는 독립적이 ㄴ함수다
- 코루틴과 스레드를 비교해보면, 코루틴은 매 awit식에서 일시 중단되고 일시 중단된 대기 기능성(awaitable)이 해결된 다음에 aync함수로부터 실행을 재개한다는 차이점이 있다
- async 함수가 서로 장단을 맞춰 실행되면 마치 모든 aync함수가 동시에 실행되는 것처럼 보이며, 이를 통해 파이썬 스레드의 동시성 동작을 흉내 낼 수 있다
- 하지만 코루틴은 쓰레드와 달리 위와 같이 동작하는데 메모리 부가 비용이나 시작 비용, 컨텍스트 전환 비용이 들지 않고 복잡한 락과 동기화 코드가 코드가 필요하지 않다
- 이런 기능을 가능하게 하는 메커니즘은 이벤트 루프(event loop)로 다수의 I/O를 효율적으로 동시에 실행할 수 있고 이벤트 루프에 맞춰 작성된 함수들을 빠르게 전환해가며 골고루 실행할 수 있다

### 자세한 내용을 필요시 확인