## 디자인 패턴

- TDD에서는 설계를 디자인 패턴과는 조금 다른 관점으로 본다
- 여기에서는 디자인 패턴을 포괄적으로 다루기보다는 예제를 이해할 수 있을 정도만 다룰 것으면 아래 패턴을 포함한다
    - 커맨드 : 계산 작업에 대한 호출(invocation of a computation)을 메시지가 아닌 객체로 표현한다
    - 값 객체 : 객체가 생성된 이후 그 값이 절대로 변하지 않게 하여 별칭 문제가 발생하지 않게 하나
    - 널 객체 : 계산 작업의 기본 사례를 객체로 표현한다
    - 템플릿 메서드 : 계산 작업의 변하지 않는 순서를 여러 추상 메서드로 표현한다. 이 추상 메서드들은 상속을 통해 특별한 작업을 수행하게끔 구체화 된다
    - 플러거블 객체 : 둘 이상의 구현을 객체를 호출함으로써 다양성을 표현한다
    - 플러거블 셀렉터 : 객체별로 서로 다른 메서드가 동적으로 호출되게 함을로써 필요 없는 하위 클래스의 생성을 피한다
    - 팩토리 메서드 : 생성자 대신 메서드를 호출함으로써 객체를 생성한다
    - 임포스터 : 현존하는 프로토콜을 갖는 다른 구현을 추가하여 시스템에 변이를 도입한다
    - 컴포지트 : 하나의 객체로 여러 객체의 행위 조합을 표현한다
    - 수집 매개 변수 : 여러 다른 객체에서 계산한 결과를 모으기 위해 메개 변수를 여러 곳으로 전달 한다
- TDD의 어느 단게에서 사용되느냐에 따라 디자인 패턴을 분류할 수 있다

#### 테스트 주도 개발에서의 디자인 패턴의 쓰임새

| 패턴       | 테스트 작성 | 리펙토링 |
|----------|--------|------|
| 커맨드      | X      |      |
| 값 객체     | X      |      |
| 널 객체     |        | X    |
| 템플릿 메서드  |        | X    |
| 플러거블 객체  |        | X    |
| 플러거블 셀렉터 |        | X    |
| 팩토리 메서드  | X      | X    |
| 임포스터     | X      | X    |
| 컴포지트     | X      | X    |
| 수집 매개 변수 | X      | X    |

### 커맨드

- 간단한 메서드 호출보다 복잡한 형태의 계산 작업에 대한 호출이 필요할 경우 객체를 생성하여 이를 호출 하면 좋다
- 메시지(함수 호출)를 보냈다는 사실을 로그로 남기길 원하는 경우
    - 언어에 새로운 특성(warpper method)을 추가하는 방법도 있지만, 그러기엔 로깅 기능이 쓰이는 빈도가 매우 낮고, 이에 비해서 간결한 언어가 우리에게 주는 가치가 너무 크기 때문에, 언어에 새로운
      특성을 추가하지 않는게 좋다
- 어떤 계산을 수행하고 싶긴 한데 나중에 하고 싶은 경우
    - 이 경우 쓰레드를 생성하고 멈춘 후에 나중에 원하는 시점에 다시 시작할 수 있겠지만 이렇게 한다면 온갖 동시성 문제를 고민해야 할 것이다
- 메시지 하나를 보내는 것보다 호출이 조금더 구체적이고 또 조작하기 쉬워지려면, 바로 객체가 해답이 된다
    - 호출 자체를 나타내기 위한 객체를 만드는 것이다
    - 객체를 생성할 때 계산에 필요한 모든 매개 변수들을 초기화 한다
    - 호출할 준비가 되면 run()과 같은 프로토콜을 이용해서 계산을 호출한다
    - 자바의 Runnable 인터페이스가 훌륭한 예이다 