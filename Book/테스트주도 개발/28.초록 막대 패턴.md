## 초록 막대 패턴

- 꺠진 테스트가 있다면 그걸 고쳐야한다.코드가 테스트를 통과하게 만들기 위해 이 패턴들을 사용하라
- (비록 결과 코드가 당신이 한 시간도 견뎌낼 수 없는 것이라고 해도)

### 가짜로 구현하기(진짜로 만들기 전까지만)

- 실패하는 테스트를 만든 후 첫 번째 구현은 상수를 반화하게 하여 일단 통과하게 만든 후에 상수를 변수를 사용하는 수식으로 변경하는게 좋다 (아래 코드)

```
return "1 run 0 failed"
return "%d run, 0 failed" % self.runCount
return "%d run %d faild % (self.runCount, self.failureCount)

이런 순서로 변해가야 한다 
```

- 가짜로 구현하기는 등산할 때 피톤(암벽 등산비 바위나 얼음에 박아서 밧줄얼 거는 안전장치)과 비슷하다
    - 아직 그곳에 도달하지는 못했다. 하지만 그곳에 일단 도달하면 안전할 것임을 안다
- 가짜로 구현하기가 가지는 강력한 두 가지 효과
    - 1> 심리학적 효과
        - 초록 막대 상태에 있는 것은 빨간 막대 상태에 있는 것과 천지 차이다. 막대가 초록색일 때, 자신이 어디에 서 있는지 안다. 당신은 확신을 갖고 거기부터 리팩토링해 갈 수 있다
    - 2 범위(scope) 조절
        - 프로그래머들은 모든 종류의 미래 문제를 상상하는 데에 탁월하다. 하나의 구체적인 예에서 시작해서 일반화하게 되면, 쓰잘데기 없는 고민으로 때 이르게 혼동하는 일을 에방할 수 있다. 다음 테스트
          케이스를 구현할 때, 이전 테스트의 작동이 보장 된다는 것을 알기 때문에 그 다음 테스트 케이스에도 집중할 수 있다

### 삼각측량

- 추상화 과정을 테스트로 주도할 떄 어떻게 최대한 보수적으로 할 수 있을까? 오로지 예가 두개 이상일 때에만 추상화를 하라(아래코드)

```
두 정수의 합을 반환하는 함수를 작성하고 싶다고 가정

public void testSum(){
    assertEquals(4, plus(3,1));
}
private int plus(int augend, int addend){
    return 4;
}
삼각측량을 사용해서 바른 설계로 간다면 다음과 같이 작성해야 한다
public void testSum(){
    assertEquals(4, plus(3,1));
    assertEquals(7, plus(3,4));
}
여기에서 두 번째 예를 얻었을 때 plus()의 구현을 추상화할 수 있다
private int plus(int augend, int addend){
    return augend + addend
}
```

- 삼각측량이 강력한 이유는 그 규칙이 매우 명확하기 때문이다
    - 가짜로 구현하기 위한 규칙들은, 추상을 끌어내기 위한 가짜 구현과 테스트 케이스 사이의 중복에 대한 우리 감각에 의존하는 것으로 약각 모호해 보이고 달리 해석될 수 있다
    - 삼각측량의 법칙들이 비록 단순해 보이기는 하지만 그것은 무한 루프를 만들어 낸다
        - 두 단언이 있고 plus를 위한 바른 구현을 추상화했다면, 두 단언 중 하나를 삭제할 수 있는데, 그것이 다른 하나와 완전히 중복되기 때문이다
        - 하지만 그렇게 하면 우리는 plus()의 구현을 단순히 상수를 반환하는 것으로 단순화할 수 있는데 그렇데 괴면 다시 단언을 하나 추가해야 한다
    - 어떻게 해야 올바르게 추상화할 것인지에 대해 감잡기 어려울때 삼각측량을 사용하면 좋다

### 명백한 구현

- 단순한 연산들은 그냥 구현해버리는 것이 좋다
- 때때로 어떤 연산을 어떻게 구현해야 할지 확신이 들기도 한다. 그럼 그렇게 하는 것이 좋다

