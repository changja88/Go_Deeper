## 모르겠으면 7장 함께 모으기 정독해라

### 설계를 어떻게 할 것인가?

즉, OOP에서는 책임-주도 설계 방식을 추구하며 책임 주도 설계 방식이란,

- 최초로 존재 하는 것은 유스케이스 밖에 없다
- 1> 유스케이스를 작성한다(작성법은 6.객체 지도 참고)
    - 유스케이스를 작성한다는 것은 시스템이 갖춰야 하는 기능, 행위, 책임을 작성한다는 뜻이다
- 2> 유스케이스를 기반으로 도메인 모델을 추출한다 (도메인 모델 6.객체 지도 참고)
    - 도메인 모델을 추출한다는 것은 시스템의 구조를 만든다는 것과 동일하다
- 3> 1번에 있는 책임을 2번에 있는 구조에 책임-주도 설계 방식으로 분배한다

### 예시

<img src = "./IMG_5646.jpg" width = "900" height = "800">

- 유스케이스
    - 유스케이스 명 : 중도 해지 이자액을 계산한다
    - 일차 액터 : 예금 주
    - 주요 성공 시나리오:
        - 1> 예금주가 정기예금 계좌를 선택한다
        - 2> 시스템은 정기예금 계좌 정보를 보여준다
        - 3> 예금주가 금일 기준으로 예금을 해지할 경우 지급받을 수 있는 이자 계산을 요청한다
        - 4> 시스템은 중도 해지 시 지급받을 수 있는 이자를 계산한 후 결과를 사용자에게 제공한다
    - 확장
        - 3a. 사용자는 해지 일자를 다른 일자로 입력할 수 있다 (3의 대안 시나리오)금
- 도메인 모델
    - 정기예금, 이자, 계좌, 이자율
- 책임-주도를 기반으로 한 책임 분배
    - 코드 작성

### 추상화는 어디에서 하는가?

- 추상화는 유스케이스 작성에서 이루어 진다
    - 예를 들어 위 유스케이스 3번에서 이자를 계산 한다고만 했지 이자를 어떤 방식으로 어떻게 계산한다고는 적지 않았다. 즉 추상화를 했다

### 도메인(개념), 인터페이스(명세), 그리고 코딩(구현)

- `코드와 모델을 밀접하게 연관시키는 것은 코드에 의미를 부여하고 모델을 적절하게 한다`
- 마틴 파울러는 객체지향 설계 안에 존재하는 세가지 상호 연관된 관점에 관해 설명한다
    - 개념적 관점(Conceptual Perspective)
    - 명세 관점(Specification Perspective)
    - 구현 관점(Implementation Perspective)
- 개념적 관점
    - 설계는 도메인 안에 존재하는 개념과 개념들 사이의 관계를 표현한다
    - 도메인이란 사용자들이 관심이 가지고 있는 특정 분야나 주제를 말하며 소프트웨어는 도메인에 존재하는 문제를 해결하기 위해 개발된다
    - 이 관점은 사용자가 도메인을 바라보는 관점을 반영한다
    - 따라서 실제 도메인 규칙과 제약을 최대한 유사하게 반영하는 것이 핵심이다
- 명세 관점
    - 사용자의 영역인 도메인을 벗어나 개발자의 영역인 소프트웨어로 초점이 옮겨진다
    - 명세 관점은 도메인의 개념이 아니라 실제로 스프트웨어 안에서 살아 숨쉬는 객체들의 책임에 초점을 맞추게 된다
    - 즉, 객체의 인터페이스를 바라보게 된다
    - 명세 관점에서 프로그래머는 객체가 협력을 위해 '무엇'을 할 수 있는가에 초점을 맞춘다
    - 인터페이스와 구현을 분리하는 것은 훌륭한 설계를 낳는 가장 기본적인 원칙이라는 점을 기억하라
    - 안타깝게도 대부분의 객체지향 언어가 인터페이스와 구현을 클래스 안으로 섞어 버리기 때문에 많은 설계자들이 인터페이스와 구현을 분리하는 것이 얼마나 중요한지 잊어버린다
    - 객체지향 설계 분야의 오래된 격언인 `구현이 아니라 인터페이스에 대해 프로그래밍 하라(GOF)`를 따르는 것은 명세 관점과 구현 관점을 명확하게 분리하는 것에서 시작한다
- 구현 관점
    - 가장 익숙한 관점으로, 실제 작업을 수행하는 코드와 연관돼 있다
    - 객체들이 책임을 수행하는 데 필요한 동작하는 코드를 작성하는 것이다
    - 따라서 프로그래머는 객체의 책임을 '어떻게' 수행할 것인가에 초점을 맞추며 인터페이스를 구현하는 데 필요한 속성과 메서드를 클래스에 추가한다
- `개념 관점, 명세 관점, 군현 관점의 순서대로 소프트웨어를 개발 한다는 의미처럼 들릴 수도 있지만 사실이 아니다`
    - 클래스가 은유하는 개념은 도메인 관점을 반영한다
    - 클래스의 공용 인터페이스는 명세 관점을 반영한다
    - 클래스의 속성과 메서드는 구현 관점을 반영한다
- 클래스는 세 가지 관점을 모두 수용할 수 있도록 개념, 인터페이스, 구현을 함꼐 드러내야 한다. 동시에 코드 안에서 세 가지 관점을 쉽게 식별할 수 있도록 깔끔하게 분리 해야 한다 