## 0.1 설계가 왜 잘못되는가?

- 소프트웨어 시스템은 혼돈 상태로 향하려는 경향이 있다
- 진흙 공 안티패턴이라고 한다
    - API핸들러 안에 도메인 지식이 있고 이메일을 보내고 로그를 남긴다. '비즈니스 로직'클래스가 아무 계산을 하지 않고 I/O를 수행한다. 모든 요소가 다른 모든 요소와 결합되어 있어서 시스템의 일부를
      바꾸는 것은 위험하다

## 0.2 캡슐화와 추상화

- `캡슐화`라는 용어는 행동의 단순화와 데이터 은닉이라는 두 가지 단어가 밀접하게 연관된 아이디어를 뜻한다. 코드에서 수행할 작업을 식별하고 이 작업에 잘 정의된 객체나 함수를 부여함으로써 행동을 캡슐화한다
- 이렇게(행동을 캡슐화해주는)객체나 함수를 `추상화`라고 한다

```python
parmas = dict(q="sasuages", format='json')
handle = urlopen('http://api.duckduckgo.com' + '?' + urlencode(parmas))
raw_test = handle.read().decode('utf8')
parsed = json.loads(raw_text)

result = parsed('RelatedTopics')
for r in result:
    if 'Test' in r:
        print(r['FirstURL'] + '-' + r['Text'])
```

```python
parmas = dict(q="sasuages", format='json')
parsed = requests.get('http://api.duckduckgo.com/', parmas=parmas).json()

result = parsed['RelatedTopics']
for r in result:
    if 'Text' in r:
        print(r['FirstURL'] + ' - ' + r['Text'])
```

- 위 두 코드는 같은 일을 한다. 하지만 두 번째 방식이 더 잘 읽히고 이해하기 쉽다. 두 번째 코드가 더 높은 수준의 추상화 아래서 동작하기 때문이다
    - [생각] 너 높은 수준의 추상화라서가 아님 추상화 수준이 같기 때문에 더 이해하기 쉬움 (둘 다 추상화 레벨은 같음)

- 추상화와 ABC
    - 자바나 C# 같은 전통적인 언어에서는 추상 기반 클래스 (ABC)나 인터페이스를 사용해 추상화를 정의할 것이다. 파이썬에서도 ABC를 사용할 수 있지만, 주로 덕 타이핑에 의존한다
    - 추상화는 단지 '여러분이 사용하는 대상이 공개한 API를'뜻한다. 예를 들면 함수 이름과 파라미터들이 바로 추상화이다
    - [생각] 미친소리다. 과정은 없고 결과막 쏙

## 0.3 계층화

- 캡슐화와 추상화를 하면 세부 사항을 감추고 데이터의 일관성을 보호할 수 있다
    - 하지만 객체와 함수들의 상호작용에도 주의해야 한다
    - `A가 B를 사용하는 경우 A가 B에 의존한다 라고 한다`

<img src = "./img/IMG_6112.jpg" width = "800" height = "250">

- 위 이미지 처럼 계층화한 아키텍처에서는 코드를 서로 구분하는 범주나 역할로 분리하고, 어떤 코드 범주가 어떤 코드 범주를 호출할 수 있는지에 대한 규칙을 도입한다

## 0.4 의존성 역전 원칙

- DIP의 엄밀한 정의
    - 1> 고수준 모듈은 저수준 모듈에 의존해서는 안 된다. 두 모듈 모두 추상화에 의존해야 한다
    - 2> 추상화는 세부 사항에 의존해서는 안 된다. 반대로 세부 사항은 추상화에 의존해야 한다
- 고수준 모듈(high-level module)
    - 조직에서 중요하게 여기는 코드
    - 고수준 모듈은 실세계의 개념을 처리하는 함수, 클래스, 패키지를 말한다
- 저수준 모듈(low-level module)
    - 조직에서 신경쓰지 않는 코드
    - HR 부서가 피일 시스템이나 네트워크 소켓에 관심을 갖을 가능성이 낮다
- `의존성은 꼭 임포트나 호출만을 뜻하지 않는다. 대신 한 모듈이 다른 모듈을 필요로 하거나, 안다는 좀더 일반적인 생각이 의존성이다`

## 0.5 모든 비즈니스 로직을 위한 장소: 도메인 모델

- 가장 일반적인 잘못된 설계는 비즈니스 로직이 애플리케이션의 전 게층에 퍼져있는 경우이다 &rarr; 이렇게 되면 로직을 식별하고, 이해하고, 변경하기가 어렵다
- 1장에서는 도메인 모델 패턴으로 비즈니스 계층을 만드는 방법을 보여준다. 1부의 나머지 부분에서는 올바른 추상화를 선택하고 지속적으로 DIP를 적용하여 이 도메인 모델을 변경하기 쉽고 저수준 관심사로부터 자유롭게
  유지하는 방법을 살펴본다

